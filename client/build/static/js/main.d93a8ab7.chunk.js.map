{"version":3,"sources":["history.js","utils/api.js","redux/actions/auth/checkAuthAction.js","React-components/components/RenderForm.jsx","React-components/components/LoginForm.jsx","React-components/components/SignupForm.jsx","React-components/pages/Home.jsx","redux/actions/user/signupUserAction.js","redux/actions/auth/loginAction.js","React-components/pages/Profile.jsx","redux/actions/user/fetchUserAction.js","React-components/lib/ProtectedRoute.jsx","React-components/lib/Header.jsx","redux/actions/auth/logoutAction.js","redux/actions/user/logoutUserAction.js","App.jsx","redux/reducers/authReducer.js","redux/reducers/index.js","redux/reducers/userReducer.js","index.js"],"names":["createBrowserHistory","axios","create","baseURL","checkAuth","dispatch","a","token","localStorage","getItem","console","log","type","payload","isLoggedIn","api","get","headers","response","_id","data","reduxForm","form","props","onSubmit","handleSubmit","formValues","handleForm","className","children","LoginForm","renderInput","input","label","placeholder","Field","name","component","SignupForm","connect","signup","post","error","code","alert","keyValue","username","user","history","push","login","message","setItem","useState","activeForm","setActiveForm","handleSignup","handleLogin","updateCurrentForm","style","borderRadius","onClick","classNames","disabled","state","ownProps","auth","fetchUserData","getState","group","groupEnd","useEffect","Object","keys","map","key","ProtectedRoute","Component","path","exact","render","to","logout","removeItem","logoutUser","Profile","INITIAL_STATE","combineReducers","action","_","omit","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","ReactDOM","document","querySelector"],"mappings":"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","file":"static/js/main.d93a8ab7.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history';\r\nexport default createBrowserHistory();","import axios from 'axios';\r\n\r\n\r\n\r\nexport default axios.create({\r\n  baseURL: 'https://dsc-chat-app.herokuapp.com',\r\n})","/* ----   CHECK_AUTH ACTION CREATOR    ---- */\r\nimport api from \"../../../utils/api\";\r\n\r\nexport const checkAuth = () => async dispatch => {\r\n  const token = localStorage.getItem('jwt-token');\r\n\r\n  if (!token) {\r\n    console.log('[AUTH]: No Token')\r\n    return dispatch({\r\n      type: 'CHECK_AUTH',\r\n      payload: {\r\n        isLoggedIn: false,\r\n        token: null\r\n      }\r\n    })\r\n  }\r\n\r\n  console.log(`[AUTH-TOKEN]: jwt-token=${token}`)\r\n  const response = await api.get(\r\n    '/user-id',\r\n    {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    }\r\n  )\r\n  dispatch({\r\n     type: 'CHECK_AUTH',\r\n     payload: {\r\n       _id: response.data,\r\n       token,\r\n       isLoggedIn: true\r\n     }\r\n   })\r\n\r\n}\r\n/* ----   ****    ---- */","import React from 'react';\r\nimport { reduxForm } from \"redux-form\";\r\n\r\nconst RenderForm = (props) => {\r\n\r\n  const handleForm = formValues => {\r\n    props.handleForm(formValues);\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={props.handleSubmit(handleForm)} className='form-signin mt-2'>\r\n      {props.children}\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default reduxForm({ form: 'homeForm' })(RenderForm);","import React from 'react';\r\nimport { Field, } from \"redux-form\";\r\nimport RenderForm from \"./RenderForm\";\r\n\r\nconst LoginForm = (props) => {\r\n\r\n  const renderInput = ({ input, label }) => {\r\n    return (\r\n      <div>\r\n        <label className='text-white text-left my-2' >{label}</label>\r\n        <input className='form-control' placeholder={label} {...input} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const handleForm = formValues => {\r\n    props.handleForm(formValues);\r\n  }\r\n\r\n  return(\r\n    <RenderForm handleForm={handleForm}>\r\n      <div className='ui stacked element'>\r\n        <Field name='username' component={renderInput} label='Username' />\r\n        <Field name='password' component={renderInput} label='Password' />\r\n        <button className='btn btn-md btn-secondary btn-block my-4 mx-auto w-25'>Submit</button>\r\n      </div>\r\n    </RenderForm>\r\n  )\r\n}\r\n\r\nexport default LoginForm;","import React from 'react';\r\nimport { Field, } from \"redux-form\";\r\nimport RenderForm from \"./RenderForm\";\r\n\r\nconst SignupForm = (props) => {\r\n\r\n  const renderInput = ({ input, label }) => {\r\n    return (\r\n      <div>\r\n        <label className='text-white text-left my-2' >{label}</label>\r\n        <input className='form-control' placeholder={label} {...input} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const handleForm = formValues => {\r\n    props.handleForm(formValues);\r\n  }\r\n\r\n  return(\r\n    <RenderForm handleForm={handleForm}>\r\n      <Field name='name' component={renderInput} label='Name' />\r\n      <Field name='username' component={renderInput} label='Username' />\r\n      <Field name='email' component={renderInput} label='Email' />\r\n      <Field name='password' component={renderInput} label='Password' />\r\n      <Field name='passwordConf' component={renderInput} label='Confirm Password' />\r\n      <button className='btn btn-md btn-secondary btn-block mt-4 mx-auto w-50'>Submit</button>\r\n    </RenderForm>\r\n  )\r\n}\r\n\r\nexport default SignupForm;\r\n","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\n\r\nimport { signup } from \"../../redux/actions/user\";\r\nimport { login } from \"../../redux/actions/auth\";\r\nimport { SignupForm, LoginForm } from \"../components\";\r\n\r\nconst Home = (props) => {\r\n  const [activeForm, setActiveForm] = useState('signup');\r\n\r\n  const handleSignup = (formValues) => {\r\n    props.signup(formValues)\r\n  }\r\n\r\n  const handleLogin = (formValues) => {\r\n    props.login(formValues)\r\n  }\r\n\r\n  const updateCurrentForm = () => {\r\n    if (activeForm === 'signup') {\r\n      setActiveForm('login')\r\n    }\r\n    if (activeForm === 'login') {\r\n      setActiveForm('signup')\r\n    }\r\n  }\r\n\r\n  const renderForm = () => {\r\n    return activeForm === 'signup' ?\r\n      <SignupForm\r\n        handleForm={handleSignup}\r\n      />\r\n      :\r\n      <LoginForm\r\n        handleForm={handleLogin}\r\n      />;\r\n  }\r\n\r\n  return (\r\n    <div className='container align-self-center bg-dark w-25 my-auto p-3' style={{borderRadius: '5px'}}>\r\n      <div className='row h-100 mb-2'>\r\n        <div  className='col'>\r\n            <button\r\n              onClick={() => updateCurrentForm()}\r\n              className={classNames({\r\n                'btn w-100 btn-large': true,\r\n                'btn-secondary': activeForm === 'signup',\r\n                'btn-outline-secondary': activeForm === 'login'\r\n              })}\r\n              disabled={activeForm === 'signup'}\r\n            >\r\n              Sign Up Here!\r\n            </button>\r\n          </div>\r\n\r\n        <div className='col'>\r\n          <button\r\n            onClick={() => updateCurrentForm()}\r\n            className={classNames({\r\n              'btn w-100 btn-large': true,\r\n              'btn-secondary disabled': activeForm === 'login',\r\n              'btn-outline-secondary': activeForm === 'signup'\r\n            })}\r\n            disabled={activeForm === 'login'}\r\n          >\r\n            Log In Here!\r\n          </button>\r\n        </div>\r\n      </div>\r\n        {renderForm()}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(null, { signup, login })(Home);\r\n\r\n","/* ----   SIGN_UP ACTION CREATOR    ---- */\r\nimport api from \"../../../utils/api\";\r\nimport history from \"../../../history\";\r\n\r\nexport const signup = (formValues) => async dispatch => {\r\n  const response = await api.post(\r\n    '/create-user',\r\n    { ...formValues }\r\n  )\r\n\r\n  if (response.data.error) {\r\n    const error = response.data.error;\r\n    if (error.code === 11000) {\r\n      alert(`The username \"${error.keyValue.username}\" has already been taken.`)\r\n    }\r\n    return\r\n  }\r\n\r\n  dispatch({\r\n     type: 'CHECK_AUTH',\r\n     payload: {\r\n       _id: response.data.user._id,\r\n       token: response.data.user.token,\r\n       isLoggedIn: true\r\n     }\r\n   })\r\n\r\n  history.push(`/profile/${response.data.user._id}`)\r\n}\r\n/* ----   ****    ---- */","/* ----   LOG_IN ACTION CREATOR    ---- */\r\nimport api from \"../../../utils/api\";\r\nimport history from \"../../../history\";\r\n\r\nexport const login = formValues => async dispatch => {\r\n  const response = await api.post(\r\n    '/login-user',\r\n    { ...formValues },\r\n  )\r\n\r\n  if (response.data.error) {\r\n    const error = response.data.error;\r\n    alert(`${error.message}`)\r\n    return;\r\n  }\r\n\r\n  localStorage.setItem('jwt-token', response.data.token);\r\n\r\n  dispatch({\r\n     type: 'LOG_IN',\r\n     payload: {\r\n       _id: response.data.user._id,\r\n       token: response.data.token,\r\n       isLoggedIn: true\r\n     }\r\n   })\r\n\r\n  history.push(`/profile/${response.data.user._id}`);\r\n}\r\n/* ----   ****    ---- */","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fetchUserData } from '../../redux/actions/user';\r\nimport { checkAuth } from \"../../redux/actions/auth\";\r\n\r\n\r\nconst Profile = (props) => {\r\n  const { user, auth, fetchUserData } = props;\r\n\r\n  useEffect(() => {\r\n    // fetch the user data if there is an auth token\r\n    if (auth.token) {\r\n      fetchUserData()\r\n    }\r\n  }, [auth.token])\r\n\r\n\r\n  // Return if no user is found\r\n  if (!user[auth._id]) {\r\n    return <div>No user found</div>\r\n  }\r\n\r\n  // Display user data\r\n  const renderUserData = () => {\r\n    return Object.keys(user[auth._id])\r\n      .map(key => {\r\n        return (\r\n          <p className='text-left' key={key}><span className='font-weight-bold'>{key}: </span><span>{user[auth._id][key]}</span></p>\r\n        )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-body'>\r\n        <h5 className='card-title'>{user[auth._id].name}</h5>\r\n        <hr />\r\n        {renderUserData()}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return {\r\n    user: state.user,\r\n    auth: state.auth\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchUserData, checkAuth })(Profile);","/* ----   FETCH_USER ACTION CREATOR    ---- */\r\nimport api from \"../../../utils/api\";\r\nimport history from \"../../../history\";\r\n\r\nexport const fetchUserData = () => async (dispatch, getState) => {\r\n  const { token, isLoggedIn, _id } = getState().auth\r\n  const response = await api.get(\r\n    `/user`,\r\n    {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    },\r\n  );\r\n  console.group('[FETCH_USER]')\r\n  console.log('[TOKEN]:',token);\r\n  console.log('[RESPONSE]', response)\r\n  console.groupEnd()\r\n\r\n  dispatch({\r\n     type: 'FETCH_USER',\r\n     payload: { ...response.data.user }\r\n   })\r\n\r\n  if (!isLoggedIn) {\r\n    history.push(`/`)\r\n  }\r\n\r\n  history.push(`/profile/${_id}`)\r\n}\r\n/* ----   ****    ---- */","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, path, ...props }) => {\r\n  return(\r\n    <Route\r\n      exact\r\n      {...props}\r\n      render={() => {\r\n        return props.auth ? <Component /> : <Redirect to='/' />\r\n      }\r\n    } />\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;\r\n\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { logout } from '../../redux/actions/auth';\r\nimport { logoutUser } from '../../redux/actions/user';\r\n\r\nconst Header = ({ auth, logout, logoutUser }) => {\r\n\r\n  // Display head with the buttons for a logged in user\r\n  const renderLoggedInHeader = () => {\r\n    return (\r\n      <div className=''>\r\n        <ul className='navbar-nav mr-auto d-flex flex-row justify-content-between'>\r\n          <li className='nav-item'>\r\n            <Link className='btn btn-md btn-secondary mx-2' to={'/chats'}>\r\n              Chats\r\n            </Link>\r\n          </li>\r\n          <li className='nav-item'>\r\n            <Link className='btn btn-md btn-secondary mx-2' to={`/profile/${auth._id}`}>\r\n              Profile\r\n            </Link>\r\n          </li>\r\n          <li className='nav-item'>\r\n            <button className='btn btn-md btn-secondary mx-2' onClick={() => {\r\n              logout();\r\n              logoutUser();\r\n            }}>\r\n              Log Out\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <nav className='navbar d-flex justify-content-between fixed-top bg-dark'>\r\n      <Link className='navbar-brand text-white' to={'/'}>Chat App</Link>\r\n        {!auth.isLoggedIn\r\n          ? <button className='btn btn-md btn-secondary'>Log In</button>\r\n          : renderLoggedInHeader()\r\n        }\r\n    </nav>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, {logout, logoutUser})(Header)\r\n\r\n","/* ----   LOG_OUT ACTION CREATOR    ---- */\r\nimport api from \"../../../utils/api\";\r\nimport history from \"../../../history\";\r\n\r\nexport const logout = () => async (dispatch, getState) => {\r\n  const { token } = getState().auth\r\n  console.log(token)\r\n  const response = await api.post(\r\n    '/logout',\r\n    {},\r\n    {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    }\r\n  )\r\n  console.log(response.data)\r\n\r\n  dispatch({\r\n     type: 'LOG_OUT',\r\n     payload: {\r\n       _id: null,\r\n       token: null,\r\n       isLoggedIn: false\r\n     }\r\n   })\r\n  localStorage.removeItem('jwt-token');\r\n  history.push('/')\r\n}\r\n/* ----   ****    ---- */","export const logoutUser = () => (dispatch, getState) => {\r\n  const { _id } = getState().auth\r\n  console.log(_id);\r\n  console.log('userlogout ran')\r\n  dispatch({\r\n    type: 'LOGOUT_USER',\r\n    payload: _id\r\n  })\r\n}","import React, { useEffect } from 'react';\r\nimport { Redirect, Router, Route, Switch } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport history from './history';\r\nimport { checkAuth } from \"./redux/actions/auth\";\r\nimport { Home, Profile } from './React-components/pages';\r\nimport { ProtectedRoute, Header } from './React-components/lib';\r\n\r\n\r\nconst App = props => {\r\n  const { auth, checkAuth } = props;\r\n  useEffect(() => {\r\n    checkAuth()\r\n  }, [checkAuth, auth.isLoggedIn])\r\n\r\n  return (\r\n    <div className='container-fluid d-flex flex-column w-100 min-vh-100 justify-content-center align-items-center'>\r\n      <Router history={history}>\r\n        <>\r\n          <Header />\r\n          <Switch>\r\n            <Route path='/' exact>\r\n              {auth.isLoggedIn ? <Redirect to={`/profile/${auth._id}`} /> : <Home />}\r\n            </Route>\r\n            <ProtectedRoute path={`/profile/${auth._id}`} auth={auth.isLoggedIn} component={Profile} />\r\n          </Switch>\r\n        </>\r\n      </Router>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { checkAuth })(App);","// Do not modify\r\nconst INITIAL_STATE = {\r\n  isLoggedIn: false,\r\n  _id: null,\r\n  token: null\r\n}\r\n\r\nexport default (state=INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case 'CHECK_AUTH':\r\n      console.log('[CHECK_AUTH]:', action)\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n    case 'LOG_IN':\r\n      console.log('[LOG_IN]:', action)\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n    case 'LOG_OUT':\r\n      console.log('[LOG_OUT]:', action);\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}","import { combineReducers } from \"redux\";\r\nimport { reducer as formReducer } from 'redux-form';\r\n// import userFormReducer from './userFormReducer';\r\nimport authReducer from './authReducer';\r\nimport userReducer from './userReducer';\r\n\r\nexport default combineReducers({\r\n  auth: authReducer,\r\n  user: userReducer,\r\n  // userState: userFormReducer,\r\n  form: formReducer\r\n});","import _ from 'lodash';\r\n\r\nexport default (state={}, action) => {\r\n  switch (action.type) {\r\n    case 'FETCH_USER':\r\n      console.log('[FETCH_USER]', action)\r\n      return {\r\n        ...state,\r\n        [action.payload._id]: action.payload\r\n      };\r\n    case 'UPDATE_USER':\r\n      console.log('[UPDATE_USER]', action)\r\n      return {};\r\n    case 'LOGOUT_USER':\r\n      return _.omit(state, action.payload);\r\n    case 'DELETE_USER':\r\n      console.log('[DELETE_USER]', action)\r\n      return {}\r\n    default:\r\n      return state;\r\n  }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from \"redux\";\r\nimport reduxThunk from 'redux-thunk';\r\n\r\nimport App from './App';\r\nimport reducers from './redux/reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  reducers,\r\n  composeEnhancers(applyMiddleware(reduxThunk))\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.querySelector('#root')\r\n);"],"sourceRoot":""}